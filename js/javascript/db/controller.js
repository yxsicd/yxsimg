/*! yxsimg 2014-10-19 */
var yxs;!function(yxs){var c=function(){function c($scope){function myhash(){if(!$scope.mypassword)return"";var ret=SHA512.hex($scope.mypassword);return ret}function showimg(){if(console.log($scope.myxx),0!==myfile.files.length){var xx=myfile.files[0];$scope.myfile=xx;var fr=new FileReader;fr.readAsDataURL(xx),fr.onload=function(){var ret=fr.result;$scope.mysrc=ret,$scope.mysrc_name=xx.name}}}function insert(e){if(e){var dataObj={lastname:lastnames[Math.floor(5*Math.random())],firstname:firstnames[Math.floor(4*Math.random())],age:Math.floor(80*Math.random())+20,image:e,id:id++};return yxs.s_db.insert("yxs","people",[dataObj]),!0}return!1}{var SHA512=new Hashes.SHA512;new Hashes.Base64}$scope.mysrc="",$scope.mysrc_name="",$scope.myfile="",$scope.people={},$scope.showimg=showimg,$scope.initdb=function(){var dbversion=2;yxs.s_db.create("yxs",[{name:"people",index:["age","firstname","lastname"]},{name:"images",index:["name","type"]}],dbversion)},$scope.deletedb=function(){yxs.s_db.deletedb("yxs")},$scope.testgetall=function(){yxs.s_db.selectall("yxs","people",function(result){$scope.people.items=result,$scope.$apply(),console.log("getAll() call success. Result:",result)})},$scope.clearfile=function(){$scope.myfile=""},$scope.testadd=function(){console.log("add test"),insert($scope.myfile)||yxs.s_io.getdataurl("people_image",function(e){$scope.myfile=e,insert($scope.myfile)})},$scope.myhash=myhash;var lastnames=["Smith","Miller","Doe","Frankenstein","Furter"],firstnames=["Peter","John","Frank","James"],id=1}return c}();yxs.c_db=c}(yxs||(yxs={}));