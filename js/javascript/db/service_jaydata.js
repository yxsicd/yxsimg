/*! yxsimg 2014-10-19 */
var yxs;!function(yxs){var s=function(){function s(){this.indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,this.dbs={}}return s.prototype.deletedb=function(dbname){var ret=this.indexedDB.deleteDatabase(dbname);console.log(ret)},s.prototype.create=function(dbname){var todoDB=new TodoDatabase({provider:"indexedDb",databaseName:dbname});todoDB.onReady(function(){})},s.prototype.insert=function(dbname,storename,objarr){var _this=this,request=indexedDB.open(dbname);request.onerror=function(){},request.onsuccess=function(event){_this.dbs[dbname]=event.target.result;var db=_this.dbs[dbname],transaction=db.transaction([storename],"readwrite"),objectStore=transaction.objectStore(storename);for(var i in objarr){var request=objectStore.add(objarr[i]);request.onsuccess=function(event){console.log(event)}}}},s.prototype.selectall=function(dbname,storename,callback){this.select(dbname,storename,null,"next",callback)},s.prototype.select=function(dbname,storename,keyrange,order,callback){var _this=this,request=indexedDB.open(dbname);request.onsuccess=function(event){_this.dbs[dbname]=event.target.result;var db=_this.dbs[dbname],transaction=db.transaction([storename],"readonly"),objectStore=transaction.objectStore(storename),result=[];objectStore.openCursor(keyrange,order).onsuccess=function(event){var cursor=event.target.result;cursor?(cursor.continue(),console.log(cursor),result[result.length]=cursor.value):callback&&callback(result)}}},new s}();yxs.s_db_jaydata=s}(yxs||(yxs={}));